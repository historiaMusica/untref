<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

 
 



 <style>

body {
  position: relative;
  font-family: 'Segoe UI', sans-serif;
  color: #333;
  min-height: 100vh;
  margin: 0;
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 0; /* importante para que quede encima del fondo */
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Vitruvian_Man_by_Leonardo_da_Vinci.jpg/1024px-Vitruvian_Man_by_Leonardo_da_Vinci.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center top;
  background-attachment: fixed;
  opacity: 0.30; /* nivel de transparencia */
  z-index: -1;
  pointer-events: none;
}

     /* body {
       background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Vitruvian_Man_by_Leonardo_da_Vinci.jpg/1024px-Vitruvian_Man_by_Leonardo_da_Vinci.jpg');
       background-size: 100% auto;
  background-repeat: no-repeat;
  background-position: center top;
  background-attachment: fixed;
  background-color: #ffffff80;
      font-family: 'Segoe UI', sans-serif;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      min-height: 50vh;

    }  */

    h1 {
      /* font-family: 'Georgia', serif; */
      font-size: 2.4rem;
      margin-bottom: 10px;
      color: #060606;
      text-align: center;
    }

   



    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      perspective: 1000px;
      background-color: #ffffff5e;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.08);
      max-width: 1400px;
    }

    .card {
      width: 150px;
      height: 220px;
      perspective: 1000px;
      position: relative;
      cursor: pointer;
    }

    .card-inner {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
      position: relative;
    }

    .card.caida .card-inner {
      transform: rotateX(100deg);
      transform-origin: bottom center;
    }

    /* .card-front {
      position: absolute;
      width: 100%;
      height: 100%;
      background: #f9f9f9;
      border: 1px solid #bbb;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      backface-visibility: hidden;
    } */
.card-front {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding: 10px;
  gap: 8px;
}

.card-front {
  background: #ffffffe5;
  border: 1px solid #ddd;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.play-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 0.85rem;
  background-color: #5f530c;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.play-btn i {
  font-size: 1rem;
}

.play-btn:hover {
  background-color: #a79219;
}

    .card-front img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 2px;
      border: 1.5px solid #888;
      margin-bottom: 12px;
    }

    .card-front .nombre {
      font-size: 0.75rem;
      color: #222;
      text-align: center;
      font-weight: 500;
    }

    .base {
      width: 150px;
      height: 12px;
      background-color: #ffffff7b;
            border-top: 2px solid rgba(170, 170, 170, 0);
      border-radius: 0 0 6px 6px;
      margin-top: -4px;
      z-index: -1;
      transform: translateY(100%);
    }

    .card.caida .card-inner::after {
      content: "✕";
      font-size: 42px;
      color: rgb(119, 36, 5);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

   
    .audio-controls {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-top: 10px;
}

.audio-controls button {
  background-color: #5f530c;
  border: none;
  border-radius: 6px;
  padding: 8px;
  color: rgba(255, 255, 255, 0.858);
  font-size: 16px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.audio-controls button:hover {
  background-color: #a79219;
}

.header-con-boton {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  max-width: 1100px;
  margin-bottom: 20px;
}

.header-con-boton h1 {
  margin: 0;
  font-size: 2.4rem;
  color: #1c1c1c;
  
}

#btn-global-play {
  background-color: #fff;
  border: 2px solid #333;
  border-radius: 8px;
  padding: 10px 14px;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.2s ease;
}

#btn-global-play:hover {
  background-color: #eee;
}

/* .titulo-con-botones {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 12px;
  margin-bottom: 16px;
} */
#encabezado-global {
  background-color: #ffffff38;

  display: flex;
  justify-content: center; /* Centra todo el contenedor horizontalmente */
  align-items: center;     /* Centra verticalmente */
  gap: 3px;                  /* Sin espacio entre título y botón */
  max-width: 1400px;
  width: 100%;
  padding: 0 2rem;
  box-sizing: border-box;
}

#titulo-principal {
  font-weight: bold;
  font-size: clamp(1.2rem, 4vw, 2.4rem);
  margin: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#botones-globales {
  display: flex;
  align-items: center;
  margin-left: 0; /* Para evitar espacios extras */
}

#botones-globales .play-btn {
  font-size: clamp(1.2rem, 3vw, 1.5rem);
  padding: 0.3rem 0.8rem;
  border-radius: 0.5rem;
  background-color: #5f530c;
  color: white;
  border: none;
  cursor: pointer;
  transition: background-color 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  /* Para que el botón también se achique proporcionalmente */
}

#botones-globales .play-btn:hover {
  background-color: #5f530c;
}

#botones-globales .play-btn i {
  font-size: 1.3em;
  pointer-events: none;
}



.panel-control {
  width: 160px;
  height: 120px;
  padding-top: 12px;
}

.panel-control .card-front {
  justify-content: space-evenly;
  gap: 12px;
}

.panel-control button {
  font-size: 24px;
  padding: 8px 12px;
  background-color: #ddd;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.panel-control button:hover {
  background-color: #bbb;
}

.boton-audio-global {
  background-color: #f9f9f9;
  border: 1px solid #bbb;
  border-radius: 8px;
  padding: 6px 12px;
  font-size: 18px;
  cursor: pointer;
  transition: background-color 0.3s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.boton-audio-global:hover {
  background-color: #e0e0e0;
}

#audio-global-info {
  font-weight: bold;
  margin-top: 10px;
  display: none;
}

.audio-info {
  font-size: 0.75em;
  color: #333;
  margin-top: 4px;
  word-break: break-all;
}

.card .audio-info {
  display: none !important;
}

.bg-light {
    --bs-bg-opacity: 1;
    background-color: #ffffff7b !important;

}

.aclaracion-filtros {
  font-size: 0.85rem;
  font-style: italic;
  margin-top: 2rem;
  text-align: right !important;
}

#filtros {
  background-color: #ffffff7b;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.08);
  max-width: 1400px;
  padding-top: 5% !important;
  padding-left: 5% !important;
  padding-right: 5% !important;
  margin-bottom: 0;

  transition: max-height 0.3s ease, opacity 0.3s ease;
    overflow: hidden; 
}

.p-4 {
  padding: 0.5rem !important ;
}

/* #filtros.hidden-mobile {
    max-height: 0;
    opacity: 0;
    padding: 0 !important;
    pointer-events: none;
  } */

  #filtros.hidden-mobile {
    display: none;
  }

  #toggle-filtros {
    display: block;           /* Que sea bloque para que tome todo el ancho disponible */
  margin-bottom: 1rem;
  background: none;
  border: none;
  padding: 0;
  padding-top: 50px;
  font-size: 1rem;
  color: #74460a;
  cursor: pointer;
  text-align: left !important;
  font-weight: 600;
  width: fit-content;      /* El ancho se adapta al texto */

}
#toggle-filtros:hover {
  text-decoration: underline;
}

#toggle-filtros {
  align-self: flex-start;  /* Para contenedores flex */
}

.my-4{
  margin-top: 0 !important;
}

@media (max-width: 998px) {
    #filtros label {
      font-size: 0.85rem;
    }

  }


  @media (max-width: 768px) {
    body::before {
    background-size: cover;
    background-position: center top;
    background-attachment: scroll; /* 🔄 importante para móviles */
  }
}

@media (min-width: 769px) {
  #toggle-filtros {
    display: none;
  }

  #filtros {
    display: block !important;
  }
}

@media (max-width: 768px) {
  #toggle-filtros {
    display: inline-block;
  }

  #filtros.hidden-mobile {
    display: none;
  }

  #filtros {
    padding: 15%;
  }

  #filtros .row {
    flex-direction: column !important;
    align-items: center;
  }

  #filtros .col-md-4 {
    width: 100%;
    max-width: 500px;
  }

  .filtros-row > .col-md-4:nth-child(1),
  .filtros-row > .col-md-4:nth-child(2) {
    padding-bottom: 0;
    margin-bottom: -16px; /* quita el espacio entre columnas de "período" */
  }

  #filtros fieldset {
    text-align: center;
  }

  .my-4{
  margin-top: 0 !important;
}

  }

    /* #filtros .d-grid {
      justify-items: center;
    } */
  



  @media (max-width: 550px) {
    body::before {
    background-size: cover;
    background-position: center top;
    background-attachment: scroll; /* 🔄 importante para móviles */
  }

    #filtros label {
      font-size: 0.85rem;
    }

    .card {
      width: 130px;
      height: 220px;
      perspective: 1000px;
      position: relative;
      cursor: pointer;
    }

    #titulo-principal {
    font-size: 1.2rem;
  }
  #botones-globales .play-btn {
    font-size: 1.2rem;
    padding: 0.3rem 0.6rem;
  }
  }

  </style>
</head>
<body>

  <div class="d-flex align-items-center justify-content-between flex-wrap" id="encabezado-global">
    <h1 id="titulo-principal" class="flex-grow-1">Historia de la Música I</h1>
    <div id="botones-globales" class="flex-grow-1"></div>
  </div>
  
  <div id="audio-global-info" class="mt-2 text-muted small" style="display: none;"></div>
  
  <!-- <div class="titulo-con-botones">
    <h1 id="titulo-principal">Historia de la Música I</h1>
    <div id="audio-global-info" style="display:none; margin-top:10px; font-weight:bold;"></div>
    <div id="botones-globales"></div>
  </div> -->

  <!-- <h1>Edad Media, Renacimiento y Barroco</h1> -->

  <button id="toggle-filtros" class="btn btn-secondary d-md-none mb-3">
    Mostrar/ocultar filtros
  </button>


  <div id="filtros" class="container my-4 p-4">
    
    <div class="row g-4 text-center filtros-row">
  
      <!-- Período -->
      <div class="col-12 col-md-4 fs-sm">
        <fieldset>
          <legend class="h6 fw-bold text-center mb-3">Período/s o escuela</legend>
          <div class="d-grid gap-1 text-start lh-sm">
        
            <!-- ✅ Todos los labels sin scroll interno -->
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Edad Media">Edad Media</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Ars antiqua">Ars antiqua</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Ars nova">Ars nova</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Ars nova italiano">Ars nova italiano</label> 
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Ars subtilior">Ars subtilior</label> 
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Movimiento trovadoresco">Movimiento trovadoresco</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Troveros">Troveros</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Renacimiento">Renacimiento</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Renacimiento arcaico">Renacimiento arcaico</label>
            
              </div>
              </fieldset>
            </div>

            <div class="col-12 col-md-4 fs-sm">
              <fieldset>
                <legend class="h6 fw-bold text-center mb-3 d-none d-md-block invisible">Período</legend>
    <div class="d-grid gap-1 text-start lh-sm">
           
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Escuela franco-flamenca">Escuela franco-flamenca</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Escuelas nacionales">Escuelas nacionales</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Escuela veneciana">Escuela veneciana</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Escuela española">Escuela española</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Escuela inglesa">Escuela inglesa</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Barroco">Barroco</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Barroco temprano">Barroco temprano</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Barroco medio">Barroco medio</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="periodo" value="Barroco tardío">Barroco tardío</label>
            </div>
        </fieldset>
      </div>
  
      <!-- lugar -->
      <div class="col-12 col-md-4 fs-sm">
        <fieldset>
          <legend class="h6 fw-bold text-center mb-3">Lugar de influencia</legend>
          <div class="d-grid gap-1 text-start lh-sm">
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Alemania">Alemania</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Francia">Francia</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Italia">Italia</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Flandes">Flandes</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Inglaterra">Inglaterra</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="España">España</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="lugar" value="Países Bajos">Países Bajos</label>
          </div>
        </fieldset>
      </div>
  
      <!-- Género -->
      <!-- <div class="col-md-4 fs-sm">
        <fieldset>
          <legend class="h6 fw-bold text-center mb-3">Género</legend>
          <div class="d-grid gap-1 text-start lh-sm">
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Misa">Misa</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Motete">Motete</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Canción polifónica medieval">Canción medieval</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Madrigal">Madrigal</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Chanson">Chanson</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Ballata">Ballata</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Conductus">Conductus</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Rondeau">Rondeau</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Virelay">Virelay</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Frottola">Frottola</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Caccia">Caccia</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Hoquetus">Hoquetus</label>
            <label class="form-check-label"><input class="form-check-input me-2" type="checkbox" name="genero" value="Fauxbourdon">Fauxbourdon</label>
          </div>
        </fieldset>
      </div> -->
  
    </div>

    <p class="aclaracion-filtros text-left text-muted small mb-2">
      *Los filtros no son excluyentes: se muestran compositores que coincidan con al menos uno de ellos. Seleccionar de a uno a la vez.
    </p>
  </div>
  
  
  
  


  <div class="grid" id="tablero">
    <!-- Las tarjetas de compositores se generan aquí dinámicamente -->
  </div>

  <script>
 const datosCompositores = [



  {
    nombre: "Hildegarda von Bingen",
    img: "img/hildegard_von_bingen.jpg",
    periodo: "Edad Media",
    lugar: "Alemania",
    generos: ["Organum/Discantus/Conductus"],
    audios: ["audio/Canzoneta.mp3", "audio/02.mp3", "audio/03.mp3"]
  },

  {
    nombre: "Leonin",
    img: "img/leoninus.jpg",
    periodo: ["Edad Media", "Ars antiqua"],
    lugar: "Francia",
    generos: ["Organum/Discantus/Conductus"],
    audios: ["audio/05.mp3", "audio/06.mp3", "audio/07.mp3", "audio/08.mp3"]
  },

  {
    nombre: "Perotin",
    img: "img/perotinus.jpg",
    periodo: ["Edad Media", "Ars antiqua"],
    lugar: "Francia",
    generos: ["Organum/Discantus/Conductus"],
    audios: ["audio/09.mp3", "audio/10.mp3", "audio/11.mp3", "audio/12.mp3"]
  },

  {
    nombre: "Petrus de Cruce",
    img: "img/petrus.jpg",
    periodo: ["Edad Media", "Ars antiqua", "Ars Nova"],
    lugar: "Francia",
    generos: ["Motete"],
    audios: ["audio/13.mp3", "audio/14.mp3", "audio/15.mp3", "audio/16.mp3"]
  },


  {
    nombre: "Adam de la Halle",
    img: "img/halle.jpg",
    periodo: ["Edad Media", "Movimiento trovadoresco", "Troveros"],
    lugar: "Francia",
    generos: ["Canción polifónica medieval", "Rondeau"],
    audios: ["audio/17.mp3", "audio/18.mp3", "audio/19.mp3", "audio/20.mp3"]
  },

  {
    nombre: "Condesa de Día",
    img: "img/condesa.jpg",
    periodo: ["Edad Media", "Movimiento trovadoresco"],
    lugar: "Francia",
    generos: ["Canción polifónica medieval"],
    audios: ["audio/21.mp3", "audio/22.mp3", "audio/23.mp3", "audio/24.mp3"]
  },

  {
    nombre: "Philippe de Vitry",
    img: "img/devitry.jpg",
    periodo: ["Edad Media", "Ars nova"],
    lugar: "Francia",
    generos: ["Motete"],
    audios: ["audio/25.mp3", "audio/26.mp3", "audio/27.mp3", "audio/28.mp3"]
  }, // hugo princeps cum structura

  {
    nombre: "Guillaume de Machaut",
    img: "img/guillaume_de_machaut.jpg",
    periodo: ["Edad Media", "Ars nova"],
    lugar: "Francia",
    generos: ["Motete", "Canción polifónica medieval", "Misa", "Balada"],
    audios: ["audio/29.mp3", "audio/30.mp3", "audio/31.mp3", "audio/32.mp3"]
  }, // Nes que on porroit les estoilles / De fortune me doi plaindre et loer

  {
    nombre: "Matteo da Perugia",
    img: "img/perugia.jpg",
    periodo: ["Edad Media", "Ars nova", "Ars subtilior"],
    lugar: "Italia",
    generos: ["Canción polifónica medieval", "Virelay", "Ballata", "Motete", "Rondeau"],
    audios: ["audio/33.mp3", "audio/34.mp3", "audio/35.mp3", "audio/36.mp3"]
  },

  {
    nombre: "Johannes Ciconia",
    img: "img/ciconia.jpg",
    periodo: ["Edad Media", "Ars nova", "Ars subtilior"],
    lugar: "Italia",
    generos: [],
    audios: []
  },


  {
    nombre: "Giovanni da Cascia",
    img: "img/daCascia.jpg",
    periodo: ["Edad Media", "Ars nova", "Ars nova italiano"],
    lugar: "Italia",
    generos: ["Canción polifónica medieval", "Madrigal medieval", "Caccia"],
    audios: ["audio/37.mp3", "audio/38.mp3", "audio/39.mp3", "audio/40.mp3"]
  },

  {
    nombre: "Francesco Landini",
    img: "img/landini.jpg",
    periodo: ["Edad Media", "Ars nova", "Ars nova italiano"],
    lugar: "Italia",
    generos: ["Canción polifónica medieval", "Madrigal medieval", "Ballata"],
    audios: ["audio/41.mp3", "audio/42.mp3", "audio/43.mp3", "audio/44.mp3"]
  }, // ecco la primavera





  {
    nombre: "John Dunstable",
    img: "img/dunstable.jpg",
    periodo: ["Renacimiento arcaico", "Renacimiento"],
    lugar: "Inglaterra",
    generos: ["Motete", "Misa"],
    audios: ["audio/45.mp3", "audio/46.mp3", "audio/47.mp3", "audio/48.mp3"]
  }, // regina celi / ascendit christus

  {
    nombre: "Gilles Binchois",
    img: "img/binchois.jpg",
    periodo: ["Renacimiento arcaico", "Renacimiento"],
    lugar: "Francia",
    generos: ["Motete", "Misa"],
    audios: ["audio/49.mp3", "audio/50.mp3", "audio/51.mp3", "audio/52.mp3"]
  }, // adieu mon amoreuse joye

  {
    nombre: "Guillaume Dufay",
    img: "img/dufay.jpg",
    periodo: ["Renacimiento arcaico", "Renacimiento"],
    lugar: "Francia",
    generos: ["Motete", "Misa", "Hoquetus", "Fauxbourdon"],
    audios: ["audio/53.mp3", "audio/54.mp3", "audio/55.mp3", "audio/56.mp3"]
  }, // ave regina coelorum

  {
    nombre: "Johannes Ockeghem",
    img: "img/ockeghem.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Francia",
    generos: ["Motete", "Misa", "Chanson"],
    audios: ["audio/57.mp3", "audio/58.mp3", "audio/59.mp3", "audio/60.mp3"]
  },

  {
    nombre: "Antoine Busnois",
    img: "img/busnois.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Francia",
    generos: ["Motete"],
    audios: ["audio/61.mp3", "audio/62.mp3", "audio/63.mp3", "audio/64.mp3"]
  }, // a vous sans autre

  {
    nombre: "Josquin des Prez",
    img: "img/josquin_des_prez.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Francia",
    generos: ["Motete", "Misa", "Chanson", "Frottola"],
    audios: ["audio/65.mp3", "audio/66.mp3", "audio/67.mp3", "audio/68.mp3"]
  },

  {
    nombre: "Jacob Obrecht",
    img: "img/obrecht.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Flandes",
    generos: ["Motete", "Misa", "Chanson"],
    audios: ["audio/69.mp3", "audio/70.mp3", "audio/71.mp3", "audio/72.mp3"]
  },


 {
    nombre: "Nicolas Gombert",
    img: "img/gombert.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Flandes",
    generos: [],
    audios: []
  }, 

  {
    nombre: "Jacques Clément",
    img: "img/clement.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"],
    lugar: "Flandes",
    generos: [],
    audios: []
  }, 
//ESCUELAS NACIONALES
//VENECIA

  {
    nombre: "Adrian Willaert",
    img: "img/willaert.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela veneciana"],
    lugar: "Italia",
    generos: [],
    audios: []
  }, // escuela veneciana

  {
    nombre: "Andrea Gabrieli",
    img: "img/andreagabrieli.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela veneciana"],
    lugar: "Italia",
    generos: [],
    audios: []
  }, // escuela veneciana

  {
    nombre: "Giovanni Gabrieli",
    img: "img/gabrieli.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela veneciana", "Barroco", "Barroco temprano"],
    lugar: "Italia",
    generos: [],
    audios: []
  }, // escuela veneciana

  {
    nombre: "Orlando Di Lasso",
    img: "img/dilasso.jpg",
    periodo: ["Escuela franco-flamenca", "Renacimiento"], 
    lugar: "Italia",
    generos: [],
    audios: []
  }, // CONTRARREFORMA

  {
    nombre: "G. Pierluigi da Palestrina",
    img: "img/palestrina.jpg",
    periodo: "Renacimiento", //escuela romana??
    lugar: "Italia",
    generos: ["Misa", "Canción"],
    audios: []
  }, // CONTRARREFORMA

  {
    nombre: "Tomás Luis de Victoria",
    img: "img/victoria.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela española"],
    lugar: "España",
    generos: [],
    audios: []
  }, // CONTRARREFORMA



//ESPAÑOLA
  {
    nombre: "Cristóbal de Morales",
    img: "img/morales.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela española"],
    lugar: "España",
    generos: [],
    audios: []
  }, // CONTRARREFORMA

  {
    nombre: "Francisco Guerrero",
    img: "img/guerrero.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela española"],
    lugar: "España",
    generos: [],
    audios: []
  }, // CONTRARREFORMA

  {
    nombre: "Juan del Encina",
    img: "img/delencina.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela española"],
    lugar: "España",
    generos: [],
    audios: []
  },


//INGLESA
  {
    nombre: "John Dowland",
    img: "img/dowland.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela inglesa", "Barroco temprano", "Barroco"],
    lugar: "Inglaterra",
    generos: [],
    audios: []
  },

  {
    nombre: "Thomas Morley",
    img: "img/morley.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela inglesa"],
    lugar: "Inglaterra",
    generos: ["Madrigal"],
    audios: []
  },

  {
    nombre: "William Byrd",
    img: "img/byrd.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela inglesa"],
    lugar: "Inglaterra",
    generos: ["Misa", "Canción"],
    audios: []
  }, // REFORMA

  {
    nombre: "Thomas Tallis",
    img: "img/tallis.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Escuela inglesa"],
    lugar: "Inglaterra",
    generos: ["Motete", "Misa"],
    audios: []
  }, // REFORMA

  {
    nombre: "Clement Janequin",
    img: "img/janequin.jpg",
    periodo:["Escuelas nacionales", "Renacimiento"],
    lugar: "Francia",
    generos: ["Chanson"],
    audios: []
  },



  {
    nombre: "Philippe Verdelot",
    img: "img/verdelot.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"], //"Escuela veneciana"??
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  }, //1er ESTADIO

    {
    nombre: "Jacques Arcadelt",
    img: "img/arcadelt.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"], //"Escuela veneciana"??
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  }, //2do ESTADIO

    {
    nombre: "Cypriano de Rore",
    img: "img/rore.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"], //"Escuela veneciana"??
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  },



//2ER ESTADIO - MUY MANIERISTA, CAMINO AL BARROCO
    {
    nombre: "Luca Marenzio",
    img: "img/marenzio.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"],
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  },

      {
    nombre: "Carlo Gesualdo",
    img: "img/gesualdo.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"],
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  },

      {
    nombre: "Luzzasco Luzzaschi",
    img: "img/luzzaschi.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento"],
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  },

        {
    nombre: "Claudio Monteverdi",
    img: "img/monteverdi.jpg",
    periodo: ["Escuelas nacionales", "Renacimiento", "Barroco temprano", "Barroco"],
    lugar: "Italia",
    generos: ["Madrigal"],
    audios: []
  },








  {
    nombre: "Giulio Caccini",
    img: "img/caccini.jpg",
    periodo: ["Barroco temprano", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Girolamo Frescobaldi",
    img: "img/frescobaldi.jpg",
    periodo: ["Barroco temprano", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Jan Pieterszoon Sweelinck",
    img: "img/sweelinck.jpg",
    periodo: ["Barroco temprano", "Barroco"],
    lugar: "Países Bajos",
    generos: [],
    audios: []
  },

  {
    nombre: "Dietrich Buxtehude",
    img: "img/buxtehude.jpg",
    periodo: ["Barroco medio", "Barroco"],
    lugar: "Alemania",
    generos: [],
    audios: []
  },



  {
    nombre: "Alessandro Scarlatti",
    img: "img/scarlatti.jpg",
    periodo: ["Barroco medio", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Jean-Baptiste Lully",
    img: "img/lully.jpg",
    periodo: ["Barroco medio", "Barroco"],
    lugar: "Francia",
    generos: [],
    audios: []
  },

  {
    nombre: "Henry Purcell",
    img: "img/purcell.jpg",
    periodo: ["Barroco medio", "Barroco"],
    lugar: "Inglaterra",
    generos: [],
    audios: []
  },

  {
    nombre: "Georg Friedrich Händel",
    img: "img/haendel.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Inglaterra",
    generos: [],
    audios: []
  },

  {
    nombre: "Arcangelo Corelli",
    img: "img/corelli.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Domenico Scarlatti",
    img: "img/dscarlatti.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Leonardo Vinci",
    img: "img/vinci.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Antonio Vivaldi",
    img: "img/vivaldi.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },

  {
    nombre: "Jean-Philippe Rameau",
    img: "img/rameau.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Francia",
    generos: [],
    audios: []
  },

  {
    nombre: "Giuseppe Torelli",
    img: "img/torelli.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Italia",
    generos: [],
    audios: []
  },
  
  {
    nombre: "François Couperin",
    img: "img/couperin.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Francia",
    generos: [],
    audios: []
  },

  {
    nombre: "Johann Sebastian Bach",
    img: "img/bach.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Alemania",
    generos: [],
    audios: []
  },

  {
    nombre: "Johann Mattheson",
    img: "img/mattheson.jpg",
    periodo: ["Barroco tardío", "Barroco"],
    lugar: "Alemania",
    generos: [],
    audios: ["h.mp3"]
  }

];



let reproductorActual = null;
let botonActivo = null;
let compositorActivo = null;
let ultimoAudio = null;

function crearTarjeta(compositor) {
  const card = document.createElement('div');
  card.className = 'card';

  const periodos = Array.isArray(compositor.periodo) ? compositor.periodo : [compositor.periodo];
  const generos = Array.isArray(compositor.generos) ? compositor.generos : (compositor.generos ? [compositor.generos] : []);
  const audios = compositor.audios || [];

  card.dataset.periodo = JSON.stringify(periodos);
  card.dataset.lugar = compositor.lugar;
  card.dataset.generos = JSON.stringify(generos);

  card.innerHTML = `
    <div class="card-inner">
      <div class="card-front">
        <img src="${compositor.img}" alt="${compositor.nombre}">
        <div class="nombre">${compositor.nombre}</div>
        ${
          audios.length > 0
            ? `
            <div class="audio-controls">
  <button class="play-btn" title="Reproducir / Pausar">
    <i class="fa fa-play"></i>
  </button>
  <button class="next-btn" title="Siguiente audio">
    <i class="fa fa-random"></i>
  </button>
</div>

              `
            : ''
        }
      </div>
    </div>
    <div class="base"></div>
  `;

  if (audios.length > 0) {
    const btnPlay = card.querySelector('.play-btn');
    const btnNext = card.querySelector('.next-btn');

    const reproducirAudio = (nuevo = false) => {
      // Si hay un audio actual que no es de este compositor, lo detenemos
      if (reproductorActual && compositorActivo !== compositor.nombre) {
        reproductorActual.pause();
        if (botonActivo) {
          botonActivo.querySelector('i').className = 'fa fa-play';
        }
      }

      let audioURL;

      // Si queremos uno diferente al último reproducido
      const posibles = audios.filter(a => a !== ultimoAudio);
      audioURL = (nuevo && posibles.length > 0)
        ? posibles[Math.floor(Math.random() * posibles.length)]
        : audios[Math.floor(Math.random() * audios.length)];

      ultimoAudio = audioURL;

      // Crear y reproducir el nuevo audio
      reproductorActual = new Audio(audioURL);



// const infoGlobal = document.getElementById('audio-global-info');
// if (infoGlobal) {
//   const nombreLimpio = audioURL.split('/').pop().replace('.mp3', '').replace(/_/g, ' ');
//   const nombreCapitalizado = nombreLimpio.replace(/\b\w/g, c => c.toUpperCase());
//   infoGlobal.textContent = `🎵 Reproduciendo: ${compositor.nombre} – ${nombreCapitalizado}`;
//   infoGlobal.style.display = 'block';
// }




      reproductorActual.play();
      
      reproductorActual.addEventListener('ended', () => {
        if (btnPlay) btnPlay.querySelector('i').className = 'fa fa-play';
        reproductorActual = null;
        botonActivo = null;
        compositorActivo = null;
 
      });

      botonActivo = btnPlay;
      compositorActivo = compositor.nombre;
      btnPlay.querySelector('i').className = 'fa fa-pause';
    };

    btnPlay.addEventListener('click', (e) => {
      e.stopPropagation();

      if (reproductorActual && compositorActivo === compositor.nombre) {
        if (reproductorActual.paused) {
          reproductorActual.play();
          btnPlay.querySelector('i').className = 'fa fa-pause';
        } else {
          reproductorActual.pause();
          btnPlay.querySelector('i').className = 'fa fa-play';
        }
      } else {
        reproducirAudio(); // nuevo compositor o nada sonando
      }
    });

    btnNext.addEventListener('click', (e) => {
      e.stopPropagation();
      if (reproductorActual) {
        reproductorActual.pause();
      }
      reproducirAudio(true); // fuerza audio distinto
    });
  }

  card.addEventListener('click', () => {
    card.classList.toggle('caida');
  });

  return card;
}


const reproductorGlobal = new Audio();
let audioActualGlobal = null;

function obtenerTodosLosAudios() {
  return datosCompositores
    .flatMap(comp => comp.audios || []);
}



// Al cargar la página, asignar un audio random para que play funcione desde el principio
audioActualGlobal = obtenerTodosLosAudios()[0] || null;  // primer audio de la lista o null si no hay
if (audioActualGlobal) {
  reproductorGlobal.src = audioActualGlobal;
}


function togglePlayPauseGlobal() {
  if (reproductorGlobal.paused) {
    if (!reproductorGlobal.src && audioActualGlobal) {
      reproductorGlobal.src = audioActualGlobal;
    }
    reproductorGlobal.play();
  } else {
    reproductorGlobal.pause();
  }
}

const botonesGlobales = document.getElementById('botones-globales');

const infoAudioGlobal = document.getElementById('audio-global-info');
const tituloPrincipal = document.getElementById('titulo-principal');

tituloPrincipal.addEventListener('click', () => {
  if (infoAudioGlobal.style.display === 'none') {
    infoAudioGlobal.style.display = 'block';
  } else {
    infoAudioGlobal.style.display = 'none';
  }
});


function actualizarInfoAudioGlobal() {
  if (!audioActualGlobal) {
    infoAudioGlobal.textContent = 'No hay audio reproduciéndose';
    return;
  }

  const compositorActual = datosCompositores.find(comp =>
    (comp.audios || []).includes(audioActualGlobal)
  );

  const nombreArchivo = audioActualGlobal.split('/').pop().replace('.mp3', '').replace(/_/g, ' ');
  const nombreCapitalizado = nombreArchivo.replace(/\b\w/g, c => c.toUpperCase());

  if (compositorActual) {
    infoAudioGlobal.textContent = `🎵 Reproduciendo: ${compositorActual.nombre} – ${nombreCapitalizado}`;
  } else {
    infoAudioGlobal.textContent = `🎵 Reproduciendo: ${nombreCapitalizado}`;
  }
}

// function actualizarInfoAudioGlobal() {
//   if (!audioActualGlobal) {
//     infoAudioGlobal.textContent = 'No hay audio reproduciéndose';
//     return;
//   }

//   const compositorActual = datosCompositores.find(comp =>
//     (comp.audios || []).includes(audioActualGlobal)
//   );

//   const nombreLimpio = audioActualGlobal.split('/').pop().replace('.mp3', '').replace(/_/g, ' ');
//   const nombreCapitalizado = nombreLimpio.replace(/\b\w/g, c => c.toUpperCase());

//   if (compositorActual) {
//     infoAudioGlobal.textContent = `🎵 Reproduciendo: ${compositorActual.nombre} – ${nombreCapitalizado}`;
//   } else {
//     infoAudioGlobal.textContent = `🎵 Reproduciendo audio desconocido – ${nombreCapitalizado}`;
//   }
// }


function reproducirAudioAleatorioGlobal() {
  const todosLosAudios = obtenerTodosLosAudios();
  if (todosLosAudios.length === 0) {
    audioActualGlobal = null;
    infoAudioGlobal.textContent = '';
    return;
  }

  const nuevoAudio = todosLosAudios[Math.floor(Math.random() * todosLosAudios.length)];
  reproductorGlobal.src = nuevoAudio;
  audioActualGlobal = nuevoAudio;
  reproductorGlobal.play();
  actualizarInfoAudioGlobal();
}

function togglePlayPauseGlobal() {
  if (reproductorGlobal.paused) {
    if (!reproductorGlobal.src && audioActualGlobal) {
      reproductorGlobal.src = audioActualGlobal;
    }
    reproductorGlobal.play();
    actualizarInfoAudioGlobal();
  } else {
    reproductorGlobal.pause();
    infoAudioGlobal.textContent = 'Audio pausado';
  }
}



const contenedorGlobal = document.createElement('div');
contenedorGlobal.className = 'audio-controls'; // para el mismo layout flex y gap

const btnGlobalPlayPause = document.createElement('button');
btnGlobalPlayPause.className = 'play-btn';
btnGlobalPlayPause.title = 'Reproducir / Pausar';
btnGlobalPlayPause.innerHTML = '<i class="fa fa-play"></i>';

btnGlobalPlayPause.addEventListener('click', () => {
  togglePlayPauseGlobal(); // usa tu función completa
  btnGlobalPlayPause.querySelector('i').className = reproductorGlobal.paused ? 'fa fa-play' : 'fa fa-pause';
});

const btnGlobalNext = document.createElement('button');
btnGlobalNext.className = 'play-btn';
btnGlobalNext.title = 'Siguiente audio aleatorio';
btnGlobalNext.innerHTML = '<i class="fa fa-random"></i>';

btnGlobalNext.addEventListener('click', () => {
  if (!reproductorGlobal.paused) {
    reproductorGlobal.pause();
  }
  reproducirAudioAleatorioGlobal();
  btnGlobalPlayPause.querySelector('i').className = 'fa fa-pause';
});

contenedorGlobal.appendChild(btnGlobalPlayPause);
contenedorGlobal.appendChild(btnGlobalNext);

botonesGlobales.appendChild(contenedorGlobal);



const tablero = document.getElementById('tablero');
datosCompositores.forEach(compositor => {
  const tarjeta = crearTarjeta(compositor);
  tablero.appendChild(tarjeta);
});

// 🔁 NUEVO: obtener los filtros desde checkboxes
function obtenerFiltrosCheckbox() {
  const filtros = {
    periodo: [],
    lugar: [],
    genero: []
  };

  document.querySelectorAll('#filtros input[type="checkbox"]:checked').forEach(checkbox => {
    const name = checkbox.name;
    const value = checkbox.value;
    if (filtros[name]) {
      filtros[name].push(value);
    }
  });

  return filtros;
}

// 🔁 NUEVO: aplicar filtros usando checkboxes
function aplicarFiltrosCheckbox() {
  const filtros = obtenerFiltrosCheckbox();

  const tarjetas = document.querySelectorAll('.card');
  tarjetas.forEach(card => {
    const datosPeriodo = JSON.parse(card.dataset.periodo);
    const datoslugar = card.dataset.lugar;
    const datosGeneros = JSON.parse(card.dataset.generos);

    const coincidePeriodo = filtros.periodo.length === 0 || filtros.periodo.some(f => datosPeriodo.includes(f));
    const coincidelugar = filtros.lugar.length === 0 || filtros.lugar.includes(datoslugar);
    const coincideGenero = filtros.genero.length === 0 || datosGeneros.some(g => filtros.genero.includes(g));

    card.style.display = (coincidePeriodo && coincidelugar && coincideGenero) ? '' : 'none';
  });
}

// 🔁 NUEVO: agregar listeners a los checkboxes
document.querySelectorAll('#filtros input[type="checkbox"]').forEach(checkbox => {
  checkbox.addEventListener('change', aplicarFiltrosCheckbox);
});

// Escape para cerrar tarjetas abiertas
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    document.querySelectorAll('.card.caida').forEach(card => card.classList.remove('caida'));
  }
});




// const reproductorGlobal = new Audio();
// let audioGlobalSonando = false;

// document.getElementById('btn-global-play').addEventListener('click', () => {
//   const btn = document.getElementById('btn-global-play');

//   if (audioGlobalSonando) {
//     reproductorGlobal.pause();
//     reproductorGlobal.currentTime = 0;
//     btn.textContent = '▶️ Aleatorio';
//     audioGlobalSonando = false;
//     return;
//   }

//   // Juntar todos los audios desde datosCompositores
//   const todosLosAudios = datosCompositores.flatMap(comp => comp.audios || []);

//   if (todosLosAudios.length === 0) return;

//   const audioAleatorio = todosLosAudios[Math.floor(Math.random() * todosLosAudios.length)];

//   reproductorGlobal.src = audioAleatorio;
//   reproductorGlobal.play();

//   audioGlobalSonando = true;
//   btn.textContent = '⏸️ Pausar';

//   reproductorGlobal.onended = () => {
//     audioGlobalSonando = false;
//     btn.textContent = '▶️ Aleatorio';
//   };
// });

document.addEventListener("DOMContentLoaded", function () {
  const toggleBtn = document.getElementById("toggle-filtros");
  const filtros = document.getElementById("filtros");

  // Al cargar, ocultar filtros y poner texto "Mostrar filtros"
  filtros.classList.add("hidden-mobile");
  toggleBtn.textContent = "Mostrar filtros";

  toggleBtn.addEventListener("click", () => {
    const oculto = filtros.classList.toggle("hidden-mobile");
    toggleBtn.textContent = oculto ? "Mostrar filtros" : "Ocultar filtros";
  });
});

  </script>



</body>
</html>
